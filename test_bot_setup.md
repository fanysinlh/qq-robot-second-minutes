# 🧪 测试环境QQ机器人设置指南

## 📋 当前状态
- **机器人状态**: "测试中" (未审核上线)
- **问题**: IP白名单错误
- **原因**: 测试状态机器人需要特殊配置

## 🔧 测试环境特殊要求

### 1. 沙盒环境配置
测试状态的机器人主要在**沙盒环境**中运行，需要：

#### 登录QQ开放平台
1. 访问 https://q.qq.com/
2. 登录你的开发者账号
3. 找到你的机器人应用 (AppID: 102808275)

#### 配置沙盒环境
1. **切换到"沙盒环境"标签** (这很重要！)
2. 进入"开发设置" -> "服务器配置"
3. 在**沙盒环境**的"IP白名单"中添加: `165.232.174.245`
4. 保存设置

### 2. 添加测试用户
测试环境通常需要添加测试用户：

1. 在沙盒环境中找到"测试用户管理"
2. 添加你自己的QQ号作为测试用户
3. 确认测试用户状态为"已激活"

### 3. 权限配置
确认以下权限已开启：
- [ ] 消息权限
- [ ] @机器人权限  
- [ ] 私信权限（如需要）

## 🚀 启动测试机器人

使用专门的测试环境启动脚本：

```bash
# 激活虚拟环境
venv\Scripts\Activate.ps1

# 启动测试环境机器人
python test_env_bot.py
```

## 📝 测试流程

### 1. 基础连接测试
```bash
python test_env_bot.py
```

如果看到以下信息说明连接成功：
```
✅ 测试环境机器人已成功登录!
🤖 机器人ID: xxxxx
📛 机器人名称: xxxxx
🏷️ 运行环境: 沙盒测试环境
🎉 测试连接成功！
```

### 2. 功能测试
在测试群或私聊中：
1. @机器人发送 "test" - 测试基础响应
2. @机器人发送 "\\help" - 查看帮助信息
3. @机器人发送 "\\cr 测试任务 1小时后" - 测试任务创建

## ⚠️ 测试环境限制

### 功能限制
- 只有添加的测试用户可以使用
- 部分API功能可能受限
- 数据不会同步到正式环境

### 连接限制
- 必须使用沙盒环境API
- IP白名单需要在沙盒环境中设置
- 可能有访问频率限制

## 🔄 从测试到正式环境

### 何时申请上线
当你完成以下测试后可以申请上线：
- [ ] 基础连接正常
- [ ] 主要功能测试通过
- [ ] 错误处理测试完成
- [ ] 用户体验测试满意

### 申请上线流程
1. 在QQ开放平台提交审核申请
2. 填写机器人功能说明
3. 提供测试截图和说明文档
4. 等待审核通过（通常1-3个工作日）

### 上线后的变化
- 可以被所有用户使用
- 需要在正式环境设置IP白名单
- 功能限制解除

## 🛠️ 常见问题解决

### Q1: 仍然提示IP白名单错误
**解决方案**:
- 确认在**沙盒环境**（不是正式环境）设置了白名单
- 等待15-30分钟让设置生效
- 检查IP地址是否正确

### Q2: 机器人无响应
**解决方案**:
- 确认已添加测试用户
- 检查消息权限是否开启
- 确认在正确的群聊中测试

### Q3: 功能受限
**解决方案**:
- 这是测试环境的正常现象
- 可以申请更多测试权限
- 或者直接申请上线审核

## 📞 获取帮助

如果遇到问题：
1. **查看官方文档**: https://bot.q.qq.com/wiki/
2. **联系技术支持**: q_developer@tencent.com
3. **加入开发者群**: 搜索"QQ开放平台开发者群"

---

## ✅ 检查清单

完成以下检查项：
- [ ] 在沙盒环境设置IP白名单: `165.232.174.245`
- [ ] 添加测试用户QQ号
- [ ] 确认消息权限已开启
- [ ] 使用 `test_env_bot.py` 启动测试
- [ ] 测试基础功能正常

**记住：测试状态的机器人主要在沙盒环境中运行！**
